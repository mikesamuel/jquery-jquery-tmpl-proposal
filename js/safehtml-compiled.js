(function(){var n={2048:'"',4096:"'",6144:""},r=[1,1,1,1,1,1,,,,1,,1],z=[0,1,4,4,5,5,,1,2,10,,9,9,12,12,12,7,,,6,6,8,2],A={"break":1,"case":1,"continue":1,"delete":1,"do":1,"else":1,"finally":1,"instanceof":1,"return":1,"throw":1,"try":1,"typeof":1}
function B(a){var b=a.length,c=a.charAt(b-1);switch(c){case "+":case "-":for(var d=b-1;d>0&&a.charAt(d-1)===c;)--d;a=b-d;return(a&1)===1;case ".":if(b===1)return 1;a=a.charAt(b-2);return!("0"<=a&&a<="9");case "/":return b===1;default:if(/[#%&(*,:-?[^{-~]/.test(c))return 1;return(a=a.match(/[\w$]+$/))&&A[a[0]]===1}}function C(a,b,c){var d,i=0,j=0;switch(b){case 1024:d=8;break;case 256:d=16;i=8192;break;case 512:d=9;break;case 768:d=22;j=32768;break;default:throw Error(b)}return d|a|b|c|i|j}
var fa=function(){function a(a){if(a.indexOf("&")<0)return a;return a.replace(/&(?:#(?:(x[\da-f]+)|(\d+))|(lt|gt|amp|quot|apos));/gi,function(a,E,b,c){if(E||b)return String.fromCharCode(0+(E||b));return aa[c.toLowerCase()]})}function b(a){this.a=a}function c(a,Z,l){var c=a.prototype=new b(/(?!)/);c.constructor=a;c.d=Z;if(l)c.f=l}function d(a,b){this.a=a;this.i=b}function i(a,b){this.a=a;this.j=b}function j(a){this.a=a}function m(a){this.a=a}function f(a){this.a=a}function o(a,b){this.a=a;this.h=b}
function e(a,b){this.a=a;this.e=b}function g(a,b){this.a=a;this.e=b}function u(a){this.a=a}function s(a){this.a=a}function k(a){this.a=a}function x(a){this.a=a}function F(a){this.a=a}function G(a){this.a=a}function w(a){this.a=a}function y(){this.b=this.c=0}function ba(b,c){for(;b;){var l;var d=b,e=c&6144;l=d.length;e===0?l=-1:e===6144?l=(d=d.match(/[\s>]/))?d.index:l:(d=d.indexOf(n[e]),l=d>=0?d:l);if(l===-1)l=new y,l.g(b,c),b=b.substring(l.c),c=l.b;else{for(var d=b.length,d=l<d?l+n[c&6144].length:
-1,e=a(b.substring(0,l)),f=new y;e.length!==0;)f.g(e,c),e=e.substring(f.c),c=f.b;if(d!==-1)b=b.substring(d),c=4|c&224;else{if(l!==b.length)throw Error();b=""}}}return c}var aa={p:"<",o:">",m:"&",q:'"',n:"'"};b.prototype.f=function(){return 1};b.prototype.d=function(){throw Error()};c(d,function(){return this.i});c(i,function(){return 4|this.j});var ca={32:8208,64:9,224:0,160:1,96:1,128:1,192:1};c(j,function(a){a&=224;var b=ca[a];if(typeof b!=="number")throw Error(a);return b===1?b|a:b});c(m,function(a){return 4|
a&224});var da={action:1,archive:1,background:1,cite:1,classid:1,codebase:1,data:1,dsync:1,href:1,longdesc:1,src:1,usemap:1};c(f,function(a,b){var c=b[1].toLowerCase(),c="on"===c.substring(0,2)?256:"style"===c?512:da[c]===1?768:1024;return 5|a&224|c});c(o,function(a){return C(a&224,a&1792,this.h)});c(e,function(a){return a&-229408|this.e});c(g,function(a){return a&8160|this.e});c(u,function(a,b){switch(a&24576){case 16384:return a&-24608|8208;case 8192:return a&-24608|21;default:throw Error("Ambiguous / could be a RegExp or division.  Please add parentheses before `"+
b[0]+"`")}});c(s,function(a,b){return a&-24577|(B(b[0])?8192:16384)});c(k,function(a){return a});var p=new k(/$/),v=new b(/[#?]|$/);v.d=function(a,b){var c=a&229376;c===32768&&(c=65536);if(c!==131072){var d=b[0];"?"===d&&c!==196608?c=98304:"#"===d&&(c=131072)}return a&-229377|c};c(x,function(){return 228},function(a){return(a&1792)===0});var t=new x(/<\/script\b/i),q=new x(/<\/style\b/i),ea={96:"textarea",128:"title",160:"listing",192:"xmp"};c(F,function(){return 228},function(a,b){return b[1].toLowerCase()===
ea[a&224]});c(G,function(a,b){var c=b[1],c='"'===c?14:"'"===c?15:13;return a&-229408|c|32768});c(w,function(a){return a&-24608|16400});var h=[];h[0]=[new k(/^[^<]+/),new d(/<\!--/,7),new i(/<script(?=[\s/>]|$)/i,32),new i(/<style(?=[\s/>]|$)/i,64),new i(/<textarea(?=[\s/>]|$)/i,96),new i(/<title(?=[\s/>]|$)/i,128),new i(/<xmp(?=[\s/>]|$)/i,192),new d(/<\/?/,2)];h[2]=[new d(/^[a-z]+/i,3),new d(/^(?=[\W\d_])/,0)];h[3]=[new k(/^[\d:a-z-]*(?:[^\W_]|$)/i),new i(/^(?=[\s/>])/,224)];h[4]=[new f(/^\s*([a-z][\w-]*)/i),
new j(/^\s*\/?>/),new k(/^\s+$/)];h[5]=[new e(/^\s*=/,6),new m(/^/)];h[6]=[new o(/^\s*"/,2048),new o(/^\s*'/,4096),new o(/^(?=[^\s"'>])/,6144),new m(/^(?=>|\s+[\w-]+\s*=)/),new k(/^\s+/)];h[7]=[new d(/--\>/,0),p];h[8]=[p];h[9]=[new e(/\/\*/,10),new e(/"/,11),new e(/'/,12),new G(/\burl\s*\(\s*(["']?)/i),q,p];h[10]=[new e(/\*\//,9),q,p];h[11]=[new e(/"/,9),new k(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\f\r]/,23),q,p];h[12]=[new e(/'/,9),new k(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\f\r]/,23),q,p];h[13]=[new e(/[\s)\\]/,
9),v,new e(/["']/,23),q];h[15]=[new e(/'/,9),v,new k(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\f\r]/,23),q];h[14]=[new e(/"/,9),v,new k(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\f\r]/,23),q];h[16]=[new e(/\/\*/,18),new e(/\/\//,17),new g(/"/,19),new g(/'/,20),new u(/\//),new s(/(?:[^\s"'/<\\]|<(?!\/script))+/i),new k(/\s+/),t];h[18]=[new e(/\*\//,16),t,p];h[17]=[new e(/[\n\r\u2028\u2029]/,16),t,p];h[19]=[new w(/"/),t,new k(/^(?:[^\n\r"<\\\u2028\u2029]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];h[20]=[new w(/'/),
t,new k(/^(?:[^\n\r'<\\\u2028\u2029]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];h[21]=[new w(/\//),t,new k(/^(?:[^\n\r/<[\\\u2028\u2029]|\\.|\\?<(?!\/script)|\[(?:[^\n\r<\\\]\u2028\u2029]|\\.)*|\\?<(?!\/script)])+/i)];h[22]=[v];h[1]=[new F(/<\/(\w+)\b/),p];y.prototype.g=function(a,b){if((b&31)===23)this.c=a.length,this.b=b;else{var c=2147483647,d=-1,e,f,g=h[b&31],j,i,k,o,m,p=g.length;for(m=0;m<p;++m)if(j=g[m],i=a.match(j.a))k=i.index,k<c&&(o=k+i[0].length,j.f(b,i)&&(c=k,d=o,e=j,f=i));e?
(this.b=e.d(b,f),this.c=d):(this.b=23,this.c=a.length);if(this.c===0&&(this.b&31)===(b&31))throw Error(b)}};return ba}();function D(){}D.prototype.toString=function(){return this.content};function H(){function a(a){this.content=a}var b=a.prototype=new D;b.constructor=a;b.contentKind=0;return a}var I=H(0),ga=H(1),ha=H(2);SanitizedHtml=I;SanitizedJsStrChars=ga;SanitizedUri=ha
function J(a){return a&&a.contentKind===0?a:a instanceof Array?a.map(J).join(""):String(a).replace(K,L)}function ia(a){if(a&&a.contentKind===0)return String(a.content).replace(M,L);return String(a).replace(K,L)}function ja(a){if(a&&a.contentKind===0)return a=String(a.content).replace(N,""),a=String(a).replace(M,L);return String(a).replace(K,L)}function ka(a){if(a&&a.contentKind===0)return a=String(a.content).replace(N,""),a=String(a).replace(la,L);return String(a).replace(ma,L)}
function na(a){a=String(a);a=oa.test(a)?a:"zSafehtmlz";var b,c=a.indexOf("=");return c>=0&&(b=a.charAt(a.length-1))!='"'&&b!="'"?a.substring(0,c+1)+'"'+a.substring(c+1)+'"':a}function pa(a){a=String(a);a=qa.test(a)?a:"zSafehtmlz";return a}function O(a){if(a&&a.contentKind===1)return a.content;return String(a).replace(ra,P)}function sa(a){var b;return a==null?" null ":(b=typeof a)=="boolean"||b=="number"?" "+a+" ":"'"+O(a)+"'"}function ta(a){return String(a).replace(ua,P)}var Q=/['-)]/g
function R(a){return"%"+a.charCodeAt(0).toString(16)}function va(a){if(a&&a.contentKind===2)return S(a);a=encodeURIComponent(a);return a.replace(Q,R)}function S(a){a=String(a);if(/[\0- "<>\\{}\x7f\x85\xa0\u2028\u2029\uff00-\uffff]|%(?![\da-f]{2})/i.test(a)){for(var a=a.split(/(%[\da-f]{2}|[#$&+,/:;=?@[\]])/i),b=a.length-1;b>=0;b-=2)a[b]=encodeURIComponent(a[b]);a=a.join("")}return a.replace(Q,R)}function wa(a){var b=String(a);return xa.test(b)?S(a):"#zSafehtmlz"}
function ya(a){return String(a).replace(za,Aa)}function Ba(a){if(a==null)return"";a=String(a);a=Ca.test(a)?a:"zSafehtmlz";return a}var T={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};function L(a){return T[a]||(T[a]="&#"+a.charCodeAt(0)+";")}var U={"\t":"\\t","\n":"\\n","\x0c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};function P(a){var b;if(!(b=U[a])){b=a.charCodeAt(0).toString(16);var c=b.length<=2?"\\x00":"\\u0000";b=c.substring(0,c.length-b.length)+b;b=U[a]=b}return b}var V={}
function Aa(a){return V[a]||(V[a]="\\"+a.charCodeAt(0).toString(16)+" ")}
var K=/[\0"&'<>]/g,M=/[\0"'<>]/g,ma=/[\0\t-\r "&'/<->`\x85\xa0\u2028\u2029-]/g,la=/[\0\t-\r "'/<->`\x85\xa0\u2028\u2029-]/g,ra=/[\0\b-\r"&'/<->\\\x85\u2028\u2029]/g,ua=/[\0\b-\r"$&-/:<-?[-^{-}\x85\u2028\u2029]/g,za=/[\0\b-\r"&-*/:->@\\{}\x85\xa0\u2028\u2029]/g,Ca=/^(?!-*(?:expression|(?:moz-)?binding))(?:[#.]?-?\w[\w-]*(?:-[_a-z][\w-]*)*-?|-?(?:\d+(?:\.\d*)?|\.\d)(?:[a-z]{1,2}|%)?|!important|)$/i,xa=/^(?:(?:https?|mailto):|[^#&/:?]*(?:[#/?]|$))/i,oa=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[\w$:-]*|dir=(?:ltr|rtl))$/i,
qa=/^(?!script|style|title|textarea|xmp|no)[\w$:-]*$/i,N=/<(?:!|\/?[a-z])(?:[^"'>]|"[^"]*"|'[^']*')*>/gi,W=[J,ia,ja,ka,pa,na,O,sa,ta,ya,Ba,va,S,wa];var X,Y;
(function(){function a(a,b){return function(c){return a(b(c))}}var b=0,c={};Y=function(d){for(var i=d.length,j=i;--j>=0;)d[j]=String(d[j]).replace(/\0+/g,"");var m=d.join("\0");if(c.hasOwnProperty(m))return c[m];for(var f=0,o=[],j=0;j<i-1;++j){var e=d[j],f=fa(e,f);if(f===23)throw Error(e);a:{var e=o,g=f&31;g===6&&(f=C(f&224,f&1792,6144));g=z[f&31];switch(f&229376){case 32768:g=13;f=f&-229377|65536;break;case 98304:g=11;break;case 0:break;case 131072:case 65536:(f&1792)!==768&&(g=12);break;default:f=
23;break a}if(g===void 0)f=23;else{var u=null,s=f&6144;if(s!==0)switch(g){case 0:break;case 2:s===6144&&(g=3);break;case 3:break;default:r[g]||(u=s===6144?3:2)}e.k=g;e.l=u}}g=o.k;e=o.l;g=W[g];if(g==null)throw Error("Interpolation in illegal position after "+d.slice(0,j+1).join("${...}"));e!==null&&(g=a(W[e],g));o.push(g)}++b===50&&(c={},b=0);return c[m]=o};X=function(a){for(var b,c=[],m=a.length>>1,f=m+1;--f>=0;)c[f]=a[f<<1];for(var o=Y(c),e=[],f=0,g=-1;f<m;++f)e[++g]=c[f],b=o[f],e[++g]=b(a[g]);e[++g]=
c[m];return new I(e.join(""))}})();safehtml=X})()
